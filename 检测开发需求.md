# 页面开发任务
## 任务介绍
我在做AndroidStudio安卓开发，并研究如何利用AI来复刻公开的商业APP（比如饿了么、微信），但我的复刻无需100%相似，我只需要做到如下几点：
- 1、UI结构基本相似，图标做不到一模一样不要紧，类似即可。
- 2、不需要做出APP的所有页面，例如腾讯会议APP，我们只做会议、通讯录等典型页面就可以了，其他的页面，比如AI录音纪要等，我们全部不处理。
- 3、不需要实现动态，例如通讯录列表我们给他固定死（联系人就只有这些），饿了么的外卖商家我也给他固定死（就只有这些店铺）。
- 4、不需要数据库，但是需要保存重要的信号（这些信号我会指定），因为我要把构建的“虚拟APP”拿去给AI操作，例如我要它“给小明的朋友圈点赞”，为了check其任务有没有完成，我至少需要一个json来存储“所有人的朋友圈的点赞列表”。
- 5、不需要登陆，不需要联网，可以理解为我们这APP仅仅自己使用，哪怕UI上显示发送了一条消息给小明，小明也不可能真的收到这个信息。
- 6、没有任何限制，对框架等的选取完全取决于开发者习惯
- 7、不需要通知权限等复杂的东西，至多需要下保存图片到本地、读取相册这样的权限

## 任务要求
1. 开发的时候可以采取逐步开发的策略，慢慢补充需求，慢慢新增数据字段等
2. 避免单个文件代码过长，**必须要遵循MVP模式**
3. 按照指定的页面结构、参考给定的截图作为UI设计指导
4. 严格按照已经定义好的数据结构`app\src\main\java\com\example\Mywechat\model`和已有的数据`app\src\main\assets\data`
5. 按照用户要求进行开发，除非用户指定，否则不要引入新的内容。
    - 你只需要参考我给你的截图，**不要脑补**截图中各个按钮点击后会达到的效果。
    - ***截图里面的信息（例如人的名字、人的头像）不必参考***，因为我们自己预设了已有的数据`app\src\main\assets\data`
6. UI中，各个图标若找不到合适的，可以用emjoy表情代替。但优先考虑`androidx.compose.material.icons.Icons, androidx.compose.material.icons.filled.AccountCircle`等
7. 严禁执行删除文件等危险操作。
8. 每当你修改完代码，记得更新`README.md`文件，并且确定build正常了再交付给我。禁止修改`开发需求.md`.
9. 如果你需要图片支持，请给我反馈，告诉我需要什么图片。如果你使用了我给你的图片，记得把图片名改为一个可读的名字，便于后期维护。
10. 不需要你直接编译，因为环境问题，我只能在AndroidStudio中运行，你只需要重复检查确保语法无误就好

## 页面树
```json
{
    {"MainActivity":
        {"HomePage"},
        {"ContactTab"},
        {"MeTab"},
    },
    {"HomePage":
        {"QuickMeetingPage":
            {"MeetingDetailsPage":
                {"MembersManagePage"},
                {"MeetingChatPage"},
                {"ShareScreen"},
            }
        },
        {"ScheduledMeetingPage":
            {"MeetingDetailsPage":
                {"MembersManagePage"},
                {"MeetingChatPage"},
                {"ShareScreen"},
            }
        },
        {"JoinMeetingPage":
            {"MeetingDetailsPage":
                {"MembersManagePage"},
                {"MeetingChatPage"},
                {"ShareScreen"},
            }
        },
        {"ShareScreeDetails":{"ShareScreen"}},
        {"MeetingHistory":{"MeetingHistoryDetails"}},
        {"ScheduleMeetingPageDatails"}
    },
    {"ContactTab":
        {"AddFriendsPage"},
        {"FriendsDetailsPage"},
    },
    {"MeTab":
        {"PersonalInformation"},
        {"PersonalMeetingRoom":{"PersonalMeetingRoomPassword"}},
        {"Record"}
    }
}
```

## 可参考的截图
D:\android_template\Tencent-Meeting\ui\中的所有图片

## 页面开发完成情况
当前页面开发已经完成，暂不需要进行页面开发的更新

# 检测开发任务

## 任务介绍
1. 我的最终目的是使用 GUIagent，来对已经开发好的腾讯会议APP进行各种操作的测试

## 任务要求
1. 注意使用 UTF-8 编码，不要出现“��”或“?K?”等乱码
2. 在保存有关 json 内容时，一定要注意格式化 json，以保证可读性
3. 如果需要用到 abd 库的话，我已经配置了相应的环境变量 adb
4. 注意用中文回答
5. 注意代码的规范性，可以参考 `https://zhuanlan.zhihu.com/p/575965662`
6. 对于经常在代码中经常用到的字符串（如 TencentMeeting 等），应该考虑找一个地方管理（或者是枚举值或者作为数据类型的一部分）。 防止不同的位置里改来改去因为一个字母漏了或者多了导致字母代码执行错误
7. 不要修改 `D:\android_template\AppSim\README.md` 等一些说明文件
8. 代码规范性：
   + 函数命名规范
     + 命名方式：王子扬指出 Python 中函数命名应采用小写下划线小写的方式，而非驼峰式命名，驼峰式命名适用于类。
     + 参数与常量：对于固定的参数，如 `result ID`、`分的 ID` 等，应作为常量在函数开头定义，常量采用全大写加下划线的形式。
     + 已经在 D:\android_template\AppSim\src\appsim\utils.py 中更新了 pull_file_from_device 和 read_json_from_device， 代码中可以逐步替换使用这个函数
   + 文件处理规范
     + 安全写法：在处理安卓文件拉到本地验证的情况时，将文件操作放在上下文空间中，可自动关闭文件句柄，比原 `open` 方式更安全。
     + 数据检查：检查数据时，要根据已知的 `send ID` 和信息内容进行具体检查，不能仅判断数据是否存在。
   + 文件存储问题
     + 数据保存位置：添加 `backupdir` 并指定为 `scripts sourcedir`，可将 `messagedir` 放在执行任务下，便于查看任务执行结果。
     + 路径完善：脚本最底下应再加一层当前相对路径和 `task` 的 `subdir`，方便检查脚本执行情况和错误信息。

## 已完成情况
1. 老师给了我们一个仓库链接，我已经克隆到了本地`D:\android_template\AppSim`
2. 我已经创建了有关这个 github 仓库的自己的分支 bugfix/eval_bugfix
3. 已经为 `D:\android_template\AppSim\src\appsim\tasks\tencentmeeting` 中已有的脚本都添加上 backup_dir 参数，用于从 Android 文件拉取到本地判断对错

## 当前的首要任务
1. 最新一次的自动化检测结果放在了`"D:\android_template\AppSim\scripts\results\UI-TARS-1.5\eval_details_TencentMeeting_20251127_163321.jsonl"`，你看一下效果怎么样，如果有错的话继续修正
2. 不需要本地模拟数据的简单检测部分，把每个脚本中的这部分内容删除，确保都是通过adb拉取远程虚拟机数据文件来检测的
3. 针对检测脚本中有关数量检测的内容，现在的检测逻辑好像都是直接检测回答中有无已规定好的数字，这种方式不容易扩展脚本，现在采取这种方式：增加“计算正确答案”的步骤，即不要依靠人工计算，而是从自己的APP获取数据来计算。参考下图：![alt text](image.png)